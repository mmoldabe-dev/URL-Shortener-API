# Используем официальный образ Go
FROM golang:1.23 AS builder

# Устанавливаем рабочую директорию для приложения
WORKDIR /app

# Копируем go.mod и go.sum для кэширования зависимостей
COPY go.mod go.sum ./

# Загружаем зависимости
RUN go mod tidy

# Копируем все остальные файлы проекта в контейнер
COPY . .

# Сборка приложения, указываем путь до main.go
RUN go build -o main ./cmd

# Запуск приложения
CMD ["./main"]
